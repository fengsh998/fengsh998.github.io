---
layout: post
title: "AEM开发系列-CRXDE和代码之间的关系(四)"
categories: AEM开发系列
tags: AEM
author: fengsh998
typora-root-url: ..
---

# CRXDE
## 一、CRXDE基本了解
![img](/assets/articles/aem/codeforcrxde/crxde.jpg)

主要路径说明：

```
/apps: 主要存放proxy组件(系统组件，开发组件)
/conf: 组件及站点设计时的匹配相关存放区，如：策略，模板，等
/content: 最终用户页面布局区。
/libs: WCM的核心组件区，adobe提供的组件都归集在这里，这里面的组件禁止修改，因为很容易在下次升级时就会被复盖       
```

## 二、CRXDE 的导出及安装功能
此功能常用来不同环境之间的JCR数据之间同步使用，导出时尽量控制在1G内，否则时间等待较长。

1、导出节点。

![img](/assets/articles/aem/codeforcrxde/exportpkg.jpg)
![img](/assets/articles/aem/codeforcrxde/export2.jpg)
![img](/assets/articles/aem/codeforcrxde/export-dl.jpg)

2、安装(upload)导出的package

![img](/assets/articles/aem/codeforcrxde/import.jpg)

# 项目工程的了解
## 一、代码结构了解

![img](/assets/articles/aem/codeforcrxde/project.jpg)

```txt
-----ProjectName 
  |
  |------all    //打包模块即，所有模块编译完成后会通过此模块进行打包并发布到AEM中
  |------core   //后端JAVA代码区，需要开发后端逻辑的可以关注此，及Sling框架的开发
  |------dispatcher //有点类似于tomcat或nginx,apache等站点运维配置(ssl,rewrite,slb...)
  |------ ...
  |------ui.apps  //站点组件开发的核心区，前端开发主要是AEM的组件开发能力
  |------ui.config  //配置区，比如JCR的权限访问之为类的配置都需要在此设置
  |------ui.content //项目的内容管理区包括模板，配置，策略，页面设置等对应于CRXDE中的路径/conf/projectNmae/settings,/content/dam/projectName
  |------ui.frontend //ui.apps组件中的html里使用的js及css都是通过这个模块编译打包的。
  |------pom.xml //项目的总模块管理
  |
```


## 二、代码运行流程

```txt
|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|          |¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|
|       all −−−−−−−−−−−−−→    |                  |
|        ↑         |          |     AEM Local    |
|     ui.apps      |          |     Author       |
|        ↑         |          |                  |
|   ui.frontend    |          |                  |
|__________________|          |__________________|

```
流程说明：
1、当网站开发工程时在ui.frontend进行站点的UI展示开发，但注意的是，此模块开发的HTML并不能直接被编译成clientlib供ui.apps使用，只有js,和css部份被编译打包。
2、AEM组件工程师当然也可以是前端工程师，根据ui.frontend 的站点UI展示，拆分成组件，并同时在此模块中开发出对应的UI组件。
3、开发完成后执行mvn clean install -PautoInstallSinglePackeage 将代码打包成jar后安装到AEM local Author环境下，即可在本地进行组件测试。









参考：
[核心组件](https://experienceleague.adobe.com/zh-hans/docs/experience-manager-core-components/using/introduction)