---
layout: post
title: "STM32 单片机"
categories: 单片机
tags: STM32
author: fengsh998
typora-root-url: ..
---

# STM32

ST公司开发的32位微控制器。
常用在嵌入式，智能车，无人机，机器人，无线通信，物联网，工业控制，娱乐电子等。

**STM资源和外设表格：**

![img](/assets/articles/ic/stm32/simple.jpg)

|英文缩写|全称|名称|英文缩写|全称|名称|
|----|---|---|----|---|---|
|NVIC|Nested Vectored Interrupt Controller|嵌套向量中断控制器|CAN|Controller Area Network|CAN通信|
|SysTick|System Tick Timer|系统滴答定时器|USB|Universal Serial Bus|USB通信|
|RCC|Reset and Clock Control|复位和时钟控制|RTC|Real-Time Clock|实时时钟|
|GPIO|General-Purpose Input/Output|通用IO口|CRC|Cyclic Redundancy Check|CRC校验|
|AFIO|Alternate Function Input/Output|复用IO口|PWR|Power Control|电源控制|
|EXTI|External Interrupt/Event Controller|外部中断|BKP|Backup Registers|备分寄存器|
|TIM|Timer|定时器|IWDG|Independent Watchdog|独立看门狗|
|ADC|Analog-to-Digital Converter|模数转换器|WWDG|Window Watchdog|窗口看门狗|
|DMA|Direct Memory Access|直接内存访问|DAC|Digital-to-Analog Converter|数模转换器|
|USART|Universal Synchronous/Asynchronous Receiver/Transmitter|同/异步串口通信|SDIO|Secure Digital Input/Output|SD卡接口|
|I2C|Inter-Integrated Circuit|I2C通信|FSMC|Flexible Static Memory Controller|可变静态存储控制器|
|SPI|Serial Peripheral Interface|SPI通信|USB OTG|USB On-The-Go|USB主机接口|

总结：

| 类别| 缩写| 是否 STM32 独有 | 备注  |
|-----|------|-----|----|
| **ARM 内核标准** | NVIC, SysTick                    | 否               | 所有 Cortex-M 都有     |
|                |                                   |                  |                        |
| **ST 外设命名**  | RCC, AFIO, PWR, BKP, FSMC        | 是               | 只有 STM32 这样叫      |
|                |                                   |                  |                        |
| **通信协议标准** | USART, I2C, SPI, CAN, USB, SDIO  | 否               | 行业通用               |
|                |                                   |                  |                        |
| **功能模块通用** | GPIO, ADC, DAC, DMA, RTC, CRC    | 否               | 命名常见               |
|                |                                   |                  |                        |
| **ST 特色实现**  | EXTI 线路映射、TIM 分类、备份域  | 是               | 实现方式是 ST 特色     |



STM32 产品系列的命名规则:(举例)
![img](/assets/articles/ic/stm32/mcu.jpg)
![img](/assets/articles/ic/stm32/mpu.jpg)
![img](/assets/articles/ic/stm32/spirit.jpg)
                         

入门级必备：
### 基础硬件：
    STM32F103C8T6 核心版，即F1系列

#### 查心片电小电路和各脚作用，并撑握使用。
![img](/assets/articles/ic/stm32/F103C8_1.jpg)
![img](/assets/articles/ic/stm32/F103C8_2.jpg)
串口连接图
![img](/assets/articles/ic/stm32/F103C8_3.jpg)
引脚说明图
![img](/assets/articles/ic/stm32/STMF103C8T6.svg)
核心版最小电路原理图
![img](/assets/articles/ic/stm32/stm32f10xcore.jpg)

#### STM开发必备
* 1、（必须）查阅该MCU对应的规格文档即Datasheet。
* 2、（必须）参考手册即Reference Manual。
* 3、（可选）编程手册即Programming Manual(可不使用HAL/LL库编写，深入研究NVIC、异常、位带操作)。

|文档 |是否必须| 主要用途|建议阅读顺序|
|---|---|----|---|
|**Datasheet（数据手册）**|必须（第一本看）| - 引脚定义（Pinout）<br>- 电压、电流、温度范围 <br>- 封装尺寸、内存大小（Flash/RAM）<br>- 电气特性（最大频率、ADC精度）|先看 → 确定你用的芯片到底有哪些资源|
|**Reference Manual（RM0008）**|必须（核心编程手册）|- 所有外设寄存器详细说明（GPIO、UART、TIM、ADC、SPI…）<br>- 中断向量表、时钟树、复位机制<br>- 每个外设的功能框图 + 寄存器位定义|主力阅读 → 写驱动必看|
|**Programming Manual（PM0056）**|可选（进阶/调试用）|- Cortex-M3 内核指令集<br>- 异常/中断处理机制（NVIC）<br>- 内存映射、位带操作|有需要时查 → 一般 HAL 库已封装|

以上的资料均可从供应商或官网里找到，但大多是英文版的，如果英文版看起来吃力，可以寻找一些国内的翻译也很不错。

[【手册】](/assets/articles/ic/stm32/STM32_V10.pdf)

### STM32 微控系列：

![img](/assets/articles/ic/stm32/stm32.jpg)

### 软件：

**STMicroelectronics 官方推荐的必备软件工具**
   
|软件名称|是否必装|主要功能|官方连接| 说明注意事项|
|---|---|---|---|---|
|**STM32CubeIDE**|必须|全功能集成开发环境（IDE），包括代码编辑、编译、调试和项目管理。基于 Eclipse，支持 HAL 库和 CubeMX 集成。|https://www.st.com/en/development-tools/stm32cubeide.html（点击 "Get latest" 下载 macOS .dmg 包）|集成编译，调试，烧录等功能|
|**STM32CubeMX**|非必须，但推荐装|图形化配置工具，用于外设初始化、引脚分配和代码生成（C 代码或部分 Linux Device Tree）。|https://www.st.com/en/development-tools/stm32cubemx.html（点击 "Get latest" 下载 macOS .zip 包）|CubeIDE内置即可|
|**STM32CubeProgrammer**|必须|多协议编程工具，支持 Flash、OTP 和外部内存编程（UART、USB、SPI、I2C 等）。包含 CLI 版本。|https://www.st.com/en/development-tools/stm32cubeprog.html（点击 "Get software" 下载 macOS .zip 包）|在无ST-Link工具下，唯一支持烧录的工具（UART/DFU）|
|**STM32CubeMonitor**|非必须|运行时变量监控和可视化工具，支持实时数据采集、自定义仪表盘和远程监控。|https://www.st.com/en/development-tools/stm32cubemonitor.html（点击 "Get latest" 下载 macOS .dmg 包）||
|**ST-LINK-SERVER**|非必须|调试服务器工具，用于多平台（包括 macOS）下管理 ST-LINK/V2/V3 探针，支持多板卡调试。|https://www.st.com/en/development-tools/st-link-server.html（点击 "Get latest" 下载多平台 .zip 包，选 macOS|CubelIDE自带调试|

非官方IDE：[下载地址](https://www.keil.com/download/product/)
   
Keil5 MDK (SMT32) 而Keil5 C51(51单片机的) --- 不一定支持mac环境。

> 如果你用 Mac 开发 STM32
>
> STM32CubeIDE 是唯一“官方 + 免费 + 原生”的选择；
>
> Keil 5 必须装 Windows 虚拟机，性价比极低。   
{: .prompt-warning } 
   
### 烧录方式：

|SWD|说明|VS|TTL(UART)|说明|
|---|---|--|---------|----|
|调试接口（像“USB 调试器”）|烧录 + 断点调试 + 变量查看|-|通信接口（像“串口打印”）|只能烧录（引导模式） + printf 打印|
|4 根线（SWDIO/SWCLK/GND/NRST）|接线方式|-|3 根线（TX/RX/GND）|接线方式|
|快（1–10 MHz）|速度|-|慢（115200 bps ≈ 0.01 MHz）|速度|


精英版硬件资源描述：

![img](/assets/articles/ic/stm32/ic.jpg)



# 教程

[【电堂课堂】](https://c.51diantang.com/?companyId=admin)

[【STM32CubeIDE的使用】](https://www.youtube.com/watch?v=yvcAiSN7u8I&list=PLtuqBdbsL-DvXMyzhGnODxjYmrH9v-PPY&index=1)

[【CubeIDE使用手册】](https://www.st.com/resource/en/user_manual/um2609-stm32cubeide-user-guide-stmicroelectronics.pdf)

[【选型】](/assets/articles/ic/stm32/Selection_Guide.pdf)

# 参考：

[【ST官网】](https://www.st.com.cn)

[【STM中文官网】](https://www.stmcu.com.cn/)

[【STM32 ARM Cortex 32位微控制器系列查找】](https://www.st.com.cn/zh/microcontrollers-microprocessors/stm32-32-bit-arm-cortex-mcus.html)

[【在线模拟】](https://wokwi.com/stm32)

[【开源STM32模拟器】](https://github.com/nviennot/stm32-emulator?tab=readme-ov-file)